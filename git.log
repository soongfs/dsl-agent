commit 3721e309791af77dc718d4c03998626a7bdb4b3a
Author: soongfs <soongfs@proton.me>
Date:   Mon Nov 24 17:04:47 2025 +0800

    微调文档

commit 3877a9e87b1448fbb14438616b964fda80d93e03
Author: soongfs <soongfs@proton.me>
Date:   Mon Nov 24 10:49:23 2025 +0800

    新增DSL脚本编写指南文档DSL_GUIDE.md

commit 080691bb71fd797dea78ff970a3f03940298fd00
Author: soongfs <soongfs@proton.me>
Date:   Mon Nov 24 10:40:36 2025 +0800

    新增测试说明文档TEST.md

commit 45a0e353fd4038cce4bdda3a6b6d5af00ac54ee4
Author: soongfs <soongfs@proton.me>
Date:   Mon Nov 24 10:36:23 2025 +0800

    新增设计描述文档DESGIN.md

commit aa3af8b86bf24457d5b2ce0f3a136465bf08cb43
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 17:53:48 2025 +0800

    将集成测试数据改为外部 JSON，避免硬编码耦合
    
    - 新增黄金用例文件：tests/data/golden_travel.json、golden_refund.json、golden_support.json、golden_faq.json、golden_appointment.json，包含场景文件、桩映射和期望步骤。
    - tests/test_golden.py 重写为读取 JSON 驱动测试，复用同一 runner。

commit 9ac844ce7a583a313d10f5ecdfc50c18d72ce669
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 17:30:22 2025 +0800

    修正README中安装依赖的命令

commit f233e2dc917636da9823c8b5b446d1b44c3dc2dd
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 17:16:16 2025 +0800

    为 CLI 增加空闲超时和自动触发默认流程
    
    - dsl_agent/cli.py：新增 --idle-timeout/配置项/环境变量 DSL_IDLE_TIMEOUT，使用 select 等待输入，超时后传入空字符串触发 default，并记录日志；默认禁用（<=0）。
    - config.example.ini：新增 idle_timeout 示例。
    - README.md：补充空闲超时说明。

commit 8ee1ffca50f3c3c6861a77f5178e62dd7d0296fe
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 17:05:00 2025 +0800

    改进退款流程避免误导
    
    - refund_bot.dsl：在填写原因后进入确认状态，提示用户确认提交；新增 confirm 状态处理确认/取消，默认提示重试确认。
    - 黄金测试更新为覆盖新确认流程（原因→确认→提交）。

commit cfe53698a43cfbf9962dfaca42c1be8cc077f437
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 16:56:25 2025 +0800

    改进初始轮体验并扩充场景
    
    - 为各示例 DSL 在起始状态增加主要业务意图，避免用户首轮提问被当作 default 重复发问
      - travel_bot 起始支持订单/机票意图。
      - refund_bot 起始支持直接提供订单号。
      - support_bot 起始支持网络/性能/账号意图直达确认。
      - appointment_bot 起始支持医生/理发/维修意图直达日期收集。
      - faq_bot 起始支持核心 FAQ 意图直接回答。

commit 5257ba1eb11019937294e301caa3401910e8ddf8
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 16:49:08 2025 +0800

    新增更多场景并完成相关更新
    
    - 添加示例脚本：tests/data/faq_bot.dsl（常见问题）、tests/data/appointment_bot.dsl（预约助手）。
    - 将机票/订单场景重命名为 travel_bot.dsl，scenario 名同步，所有引用、测试、配置示例已更新。
    - 更新测试：解析器、黄金集成测试覆盖新脚本；黄金测试中 travel/refund/support/faq/appointment 全覆盖。
    - 配置示例：config.example.ini 增加新场景的意图描述与欢迎语。
    - README：示例运行命令更新为 travel_bot，新增 FAQ/预约示例并列出全部脚本。
    - TEST_PLAN：黄金用例描述改为涵盖所有示例。

commit ee6b90e9d4c0634b31314888d9bfa5fdc16de49d
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 16:32:11 2025 +0800

    将示例脚本重命名
    
    - demo_bot.dsl 改为更贴合场景的 travel_bot.dsl，scenario 名同步为 travel_bot。
    - 相关引用更新：README、config.example.ini、解析/解释/黄金测试等均改指向 travel_bot。

commit f9297879ecd71e14846dbb5e48ffc808f39f008b
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 16:24:39 2025 +0800

    完善交付说明与文档要点
    
    - README.md 增加其他示例运行命令、测试命令，以及日志默认路径和安全提示，方便快速体验各场景。
    - 保持配置说明（欢迎语、LLM 接入、use_stub 优先级等）清晰，提醒勿提交真实 API Key。

commit 26669877bf9ad7e1b4c68046fea88f5b21b3addb
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 16:20:52 2025 +0800

    移除对__pycache__的追踪

commit 95cbe758ccf0b621058a14ff0d61e19856b19888
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 16:18:16 2025 +0800

    补充集成（golden）测试
    
    - 新增 tests/test_golden.py，为 demo/refund/support 三个脚本各定义固定的输入→意图映射→回复/状态/结束断言，使用 StubIntentService 驱动完整对话。
    - 通用 run_golden 助手确保回复包含预期片段、状态/ended 符合预期。
    - 现在集成测试覆盖了三种场景的“happy path”对话，保证修改后对话流程保持稳定。

commit 7b9d3a38630fb3a5c633fad95fb9df6d334257ad
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 15:54:12 2025 +0800

    增加启动欢迎提示并配置示例
    
    - dsl_agent/cli.py：读取 [welcome.<scenario>] 配置，为每个场景显示定制欢迎语；无配置时显示默认欢迎。
    - config.example.ini：为 demo/refund/support 场景添加欢迎语示例。
    - README.md：说明可选的欢迎语配置。

commit c68d27fb742f67e53b83c612fea1319f6af6cc6d
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 14:40:31 2025 +0800

    改为默认使用LLM而非桩

commit 5f3f61f59a9326fe897889d4c54cc35e04ad25c2
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 14:34:23 2025 +0800

    新增几个场景下的使用案例

commit 02c8120f05f0193a744916307fd6035eecba4e38
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 14:27:56 2025 +0800

    日志写入文件

commit d7d301a66b4e0c2644fdd8b7dd788c67a30a02df
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 14:19:17 2025 +0800

    测试脚本回复文本改为中文，调整测试预期为中文

commit bf8139793e9641ea4f9497fab7368ba215d94e6c
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 14:11:57 2025 +0800

    在配置中绑定意图描述到具体场景
    
    - dsl_agent/cli.py：解析配置时读取 [intent_descriptions.<scenario>] 小节，将对应描述传入 LLMIntentService；构建意图服务时按当前场景选择描述。
    - config.example.ini：示范 demo_bot 场景的意图描述，帮助模型判定。
    - README.md：补充意图描述配置说明。

commit f20a62b46aa31f93718724617dd1f6950b4fa275
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 14:05:20 2025 +0800

    LLMIntentService：强化提示（仅输出一个标签，不确定返回none，可附意图描述）
    
    截断用户输入，设置 max_tokens/temperature/timeout，支持重试，增加结果归一化（提取首个字母数字 token），并允许注入 client 与 intent_descriptions。调用移至 asyncio.to_thread 避免阻塞事件循环。

commit 313dca0bae67d5d915cdf620f44831b847999d17
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 03:20:43 2025 +0800

    完成LLMIntentService接入与测试扩充
    
    - dsl_agent/intent_service.py：实现基于 OpenAI 兼容接口的 LLMIntentService（含提示构造、max_tokens/temperature/timeout、异常返回 None），保留桩实现。解析器依旧按文档行为。
    - tests/test_parser.py：增加多条边界用例（重复 default/state、缺失/错误 initial、缺分号等）。
    - tests/test_intent_service.py：通过替换 client.chat 的桩对象，验证 LLMIntentService 的意图提取与未知返回 None，无需网络。
    - config.example.ini：提供示例配置（含 api_base/api_key/model）。
    - README.md：增加接入 LLM 说明和运行指引。
    - pyproject.toml：运行依赖改为 openai>=1.42.0，dev 依赖为 pytest。

commit 4e0e2ccee59a3be810d0fbc9dc6e7c6af61ff395
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 03:04:40 2025 +0800

    扩充测试与文档
    
    - tests/test_parser.py：新增多场景用例（重复 default、重复 state、缺失/错误 initial、隐式初始为首个 state、缺分号、重复 state 名等），覆盖更多解析错误路径。
    - 新增 config.example.ini：演示 LLM 与 settings 配置结构。
    - 更新 README.md：提供快速开始、配置优先级（环境>CLI>配置）、运行示例和测试命令说明。

commit 712750f5b16e85ada505c5087b00135af5b8cf0f
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 02:59:17 2025 +0800

    基础实现和测试
    
    - 实现数据模型、解析器、解释器、意图服务抽象与桩、CLI入口
    - 添加示例脚本tests/data/demo_bot.dsl及pytest测试覆盖解析器、解释器基础行为

commit 843a63dcbe6fe783ab1b0c2ccb8d0f68adafb8d3
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 02:10:07 2025 +0800

    新增文档：DSL_SPEC.md & ARCHITECTURE.md & TEST_PLAN.md

commit 20543d50610cc680fc30c837b51be32a3bbd92f5
Author: soongfs <soongfs@proton.me>
Date:   Sun Nov 23 01:41:35 2025 +0800

    初始化git和uv & 整理项目要求和项目计划文档
